"use strict";(self.webpackChunksolus_help_center=self.webpackChunksolus_help_center||[]).push([["9191"],{74244:function(e,t,a){a.r(t),a.d(t,{metadata:()=>i,contentTitle:()=>o,default:()=>l,assets:()=>p,toc:()=>c,frontMatter:()=>r});var i=JSON.parse('{"id":"packaging/appstream-metainfo","title":"Appstream Metainfo","description":"AppStream metainfo is required for all graphical application in Solus repository.","source":"@site/docs/packaging/appstream-metainfo.md","sourceDirName":"packaging","slug":"/packaging/appstream-metainfo","permalink":"/docs/packaging/appstream-metainfo","draft":false,"unlisted":false,"editUrl":"https://github.com/getsolus/help-center-docs/tree/master/docs/packaging/appstream-metainfo.md","tags":[],"version":"current","lastUpdatedAt":1739658001000,"frontMatter":{"title":"Appstream Metainfo","summary":"The purpose and format of Appstream Metainfo"},"sidebar":"packagingSidebar","previous":{"title":"Local Repository","permalink":"/docs/packaging/advanced-config/local-repository"},"next":{"title":"Git Basics","permalink":"/docs/packaging/git-basics"}}'),n=a("85893"),s=a("50065");let r={title:"Appstream Metainfo",summary:"The purpose and format of Appstream Metainfo"},o="AppStream Metainfo",p={},c=[{value:"Adding appstream metainfo to an existing package",id:"adding-appstream-metainfo-to-an-existing-package",level:2},{value:"Testing appstream metainfo",id:"testing-appstream-metainfo",level:2},{value:"Other Info",id:"other-info",level:2}];function d(e){let t={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"appstream-metainfo",children:"AppStream Metainfo"})}),"\n",(0,n.jsx)(t.admonition,{type:"important",children:(0,n.jsx)(t.p,{children:"AppStream metainfo is required for all graphical application in Solus repository."})}),"\n",(0,n.jsx)(t.p,{children:"AppStream allows upstream projects to define metadata about the components they provide using small XML files, metainfo files, which get installed into locations on the client system and are used by distributors to enhance their metadata."}),"\n",(0,n.jsx)(t.p,{children:"AppStream metainfo become a requirement for all graphical application in Solus repository because software centers such as GNOME software and KDE Discover rely on it to display applications that are available in repository. AppStream metainfo should be shipped by the upstream project, bundled in with its source, but sometimes upstream projects don't do so. In which case, packagers are required to add AppStream metainfo themselves."}),"\n",(0,n.jsx)(t.h2,{id:"adding-appstream-metainfo-to-an-existing-package",children:"Adding appstream metainfo to an existing package"}),"\n",(0,n.jsx)(t.p,{children:"There are a few scenarios that Packagers might encounter:"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"No"}),(0,n.jsx)(t.th,{children:"Scenario"}),(0,n.jsx)(t.th,{children:"Solution"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"1"}),(0,n.jsx)(t.td,{children:"An application already provides appstream metainfo"}),(0,n.jsx)(t.td,{children:"Nothing to do"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"2"}),(0,n.jsx)(t.td,{children:"An application contains appstream metainfo in the source package but we do not install it"}),(0,n.jsxs)(t.td,{children:["Install the appstream metainfo to ",(0,n.jsx)(t.code,{children:"/usr/share/metainfo"}),". ",(0,n.jsx)(t.em,{children:"Example"}),": ",(0,n.jsx)(t.a,{href:"https://github.com/getsolus/packages/commit/0a726a53454e7c8a6b0e66de69d59bcc66f0fc19",children:"here"})]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"3"}),(0,n.jsx)(t.td,{children:"An application doesn't contain appstream metainfo in the source package but it exists on Flathub"}),(0,n.jsxs)(t.td,{children:["Borrow and tweak the appstream metainfo from the Flathub repo. Encourage upstream project to add it to their source. ",(0,n.jsx)(t.em,{children:"Example"}),": ",(0,n.jsx)(t.a,{href:"https://github.com/getsolus/packages/commit/da2f65b93f412da43d1db9edbcb08bb90517a0eb",children:"here"})]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"4"}),(0,n.jsx)(t.td,{children:"An application doesn't provide appstream metainfo and it doesn't exist on flathub"}),(0,n.jsxs)(t.td,{children:["Write the appstream metadata, submit it to upstream project. ",(0,n.jsx)(t.em,{children:"Example"}),": ",(0,n.jsx)(t.a,{href:"https://github.com/getsolus/packages/commit/414219d8b2ceeabe85178d3a467f81b9131016f4",children:"here"})]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"5"}),(0,n.jsx)(t.td,{children:"Appstream metainfo is provided but generation of it is failing"}),(0,n.jsxs)(t.td,{children:["See ",(0,n.jsx)(t.a,{href:"https://github.com/getsolus/solus-appstream-data#debugging-failures",children:"here"}),". ",(0,n.jsx)(t.em,{children:"Example"}),": ",(0,n.jsx)(t.a,{href:"https://github.com/getsolus/packages/commit/583b7c742caf50e2f66a70e9b62e9b91566c03f5",children:"here"}),"."]})]})]})]}),"\n",(0,n.jsxs)(t.p,{children:["AppStream metainfo is to be installed in the ",(0,n.jsx)(t.code,{children:"/usr/share/metainfo/"})," directory. It must be placed in the package which should be installed in order to get the software described by the respective metadata. This means that you might need to move the _.metainfo.xml or _.appdata.xml to the right (sub)package."]}),"\n",(0,n.jsx)(t.p,{children:'In case your AppStream metainfo is describing a desktop-application (you can tell by the XML root-node having a type="desktop-application" or type="desktop" attribute), the .appdata.xml file must be placed in the same package as the .desktop file already is, which (as above) must be the package containing the application itself.'}),"\n",(0,n.jsx)(t.h2,{id:"testing-appstream-metainfo",children:"Testing appstream metainfo"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"Clone the package repo"}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"Build it or eopkg fetch pkgname"}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:["Run ",(0,n.jsx)(t.code,{children:"sudo eopkg it appstream-glib"}),", ",(0,n.jsx)(t.code,{children:"appstream-builder --packages-dir=. --include-failed -v"})]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:["Look in the ",(0,n.jsx)(t.code,{children:"example-failed.xml.gz"})," file to see if the appstream generation failed"]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:["Look in the ",(0,n.jsx)(t.code,{children:"example.xml.gz"})," file to see if the appstream generation succeeded."]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"other-info",children:"Other Info"}),"\n",(0,n.jsx)(t.p,{children:"A package must provide one appstream metainfo file, an icon file and a .desktop file for AppStream generation to succeed. However, there are exceptions to this. If an application provides more than one AppStream metainfo file then the package must be subpackaged for generation of all the appstream metainfo files to succeed."})]})}function l(e={}){let{wrapper:t}={...(0,s.a)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},50065:function(e,t,a){a.d(t,{Z:function(){return o},a:function(){return r}});var i=a(67294);let n={},s=i.createContext(n);function r(e){let t=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),i.createElement(s.Provider,{value:t},e.children)}}}]);