<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-packaging/stack-rebuilds" data-has-hydrated=false><head><meta charset=UTF-8><meta name=generator content="Docusaurus v3.9.2"><title data-rh=true>Rebuilding a stack | Solus Help Center</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"/><meta data-rh=true name=twitter:card content=summary_large_image /><meta data-rh=true property=og:image content=https://help.getsol.us/img/logo.jpg /><meta data-rh=true name=twitter:image content=https://help.getsol.us/img/logo.jpg /><meta data-rh=true property=og:url content=https://help.getsol.us/docs/packaging/stack-rebuilds /><meta data-rh=true property=og:locale content=en /><meta data-rh=true name=docusaurus_locale content=en /><meta data-rh=true name=docsearch:language content=en /><meta data-rh=true name=docusaurus_version content=current /><meta data-rh=true name=docusaurus_tag content=docs-default-current /><meta data-rh=true name=docsearch:version content=current /><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current /><meta data-rh=true property=og:title content="Rebuilding a stack | Solus Help Center"/><meta data-rh=true name=description content="In packaging, a stack is a package and the packages that depend on it. Most commonly, this refers to libraries, such as the Poppler stack, but other software can be referred to a stack as well. One example is the GNOME stack, which includes the libraries and applications that are the core of the GNOME desktop environment. Packages that depend on another package are called that package's reverse dependencies. When updating a library, one has to be mindful of its reverse dependencies, and if they will need to be rebuilt after updating the library."/><meta data-rh=true property=og:description content="In packaging, a stack is a package and the packages that depend on it. Most commonly, this refers to libraries, such as the Poppler stack, but other software can be referred to a stack as well. One example is the GNOME stack, which includes the libraries and applications that are the core of the GNOME desktop environment. Packages that depend on another package are called that package's reverse dependencies. When updating a library, one has to be mindful of its reverse dependencies, and if they will need to be rebuilt after updating the library."/><link data-rh=true rel=icon href=/img/support-icon-2.svg /><link data-rh=true rel=canonical href=https://help.getsol.us/docs/packaging/stack-rebuilds /><link data-rh=true rel=alternate href=https://help.getsol.us/docs/packaging/stack-rebuilds hreflang=en /><link data-rh=true rel=alternate href=https://help.getsol.us/docs/packaging/stack-rebuilds hreflang=x-default /><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://help.getsol.us/docs/packaging/stack-rebuilds","name":"Rebuilding a stack","position":1}]}</script><link rel=alternate type=application/rss+xml href=/blog/rss.xml title="Solus Help Center RSS Feed"><link rel=alternate type=application/atom+xml href=/blog/atom.xml title="Solus Help Center Atom Feed"><link rel=stylesheet href=/assets/css/styles.eb4ec8d8.css /><script src=/assets/js/runtime~main.16bdf411.js defer></script><script src=/assets/js/main.5e6d9d1b.js defer></script></head><body class=navigation-with-keyboard><svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><div class=navbar__logo><img src=/img/logo.svg alt="Solus Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"/><img src=/img/logo.svg alt="Solus Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"/></div><b class="navbar__title text--truncate">Solus Help Center</b></a><a class="navbar__item navbar__link" href=/docs/user/intro>Users</a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/docs/packaging/>Packaging</a><a class="navbar__item navbar__link" href=/docs/organization/intro>Organization</a><a class="navbar__item navbar__link" href=/blog>Dev Log</a><div class="navbar__item dropdown dropdown--hoverable"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link>More</a><ul class=dropdown__menu><li><a href=https://getsol.us target=_blank rel="noopener noreferrer" class=dropdown__link>Solus Homepage<svg width=12 height=12 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li><a href=https://discuss.getsol.us/ target=_blank rel="noopener noreferrer" class=dropdown__link>Forums<svg width=12 height=12 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li><a href=https://matrix.to/#/#solus:matrix.org target=_blank rel="noopener noreferrer" class=dropdown__link>Matrix<svg width=12 height=12 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li><a href=https://floss.social/@getsolus target=_blank rel="noopener noreferrer" class=dropdown__link>Mastodon<svg width=12 height=12 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li><a href=https://github.com/getsolus target=_blank rel="noopener noreferrer" class=dropdown__link>Github<svg width=12 height=12 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li><a href=https://dev.getsol.us/ target=_blank rel="noopener noreferrer" class=dropdown__link>Packages<svg width=12 height=12 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li><a href=https://issues.getsol.us/ target=_blank rel="noopener noreferrer" class=dropdown__link>Issue Tracker<svg width=12 height=12 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li><a href=https://github.com/getsolus/packages/blob/main/SECURITY.md target=_blank rel="noopener noreferrer" class=dropdown__link>Security<svg width=12 height=12 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_Bca1><div class="navbar__search searchBarContainer_NW3z" dir=ltr><input placeholder=Search aria-label=Search class="navbar__search-input searchInput_YFbd" value="" /><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs/packaging/><span title="Packaging Overview" class=linkLabel_WmDU>Packaging Overview</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs/packaging/prepare-for-packaging><span title="Prepare for Packaging" class=linkLabel_WmDU>Prepare for Packaging</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs/packaging/update-dev-environment><span title="Update Your Development Environment" class=linkLabel_WmDU>Update Your Development Environment</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs/packaging/creating-a-new-package><span title="Creating a New Package" class=linkLabel_WmDU>Creating a New Package</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs/packaging/updating-an-existing-package><span title="Updating an Existing Package" class=linkLabel_WmDU>Updating an Existing Package</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs/packaging/testing-a-package><span title="Testing a Package" class=linkLabel_WmDU>Testing a Package</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs/packaging/submitting-a-pull-request><span title="Submitting a Pull Request for Review" class=linkLabel_WmDU>Submitting a Pull Request for Review</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs/packaging/packaging-changes><span title="Packaging Changes" class=linkLabel_WmDU>Packaging Changes</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/docs/category/advanced-configuration><span title="Advanced Configuration" class=categoryLinkLabel_W154>Advanced Configuration</span></a><button aria-label="Expand sidebar category 'Advanced Configuration'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs/packaging/appstream-metainfo><span title="Appstream Metainfo" class=linkLabel_WmDU>Appstream Metainfo</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs/packaging/git-basics><span title="Git Basics" class=linkLabel_WmDU>Git Basics</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs/packaging/monitoring.yaml><span title="Monitoring YAML" class=linkLabel_WmDU>Monitoring YAML</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs/packaging/package.yml><span title="Package YAML" class=linkLabel_WmDU>Package YAML</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs/packaging/packaging-practices><span title="Packaging Practices" class=linkLabel_WmDU>Packaging Practices</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/docs/category/procedures><span title=Procedures class=categoryLinkLabel_W154>Procedures</span></a><button aria-label="Expand sidebar category 'Procedures'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current=page href=/docs/packaging/stack-rebuilds><span title="Rebuilding a stack" class=linkLabel_WmDU>Rebuilding a stack</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs/packaging/translation-instructions><span title="Translation instructions" class=linkLabel_WmDU>Translation instructions</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs/packaging/troubleshooting-packaging><span title="Troubleshooting for Packagers" class=linkLabel_WmDU>Troubleshooting for Packagers</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs/packaging/your-first-package-update><span title="Your First Package Update" class=linkLabel_WmDU>Your First Package Update</span></a></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=Breadcrumbs><ul class=breadcrumbs><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link>Rebuilding a stack</span></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Rebuilding a stack</h1></header>
<p>In packaging, a stack is a package and the packages that depend on it. Most commonly, this refers to libraries, such as the Poppler stack, but other software can be referred to a stack as well. One example is the GNOME stack, which includes the libraries and applications that are the core of the GNOME desktop environment. Packages that depend on another package are called that package's <em>reverse dependencies</em>. When updating a library, one has to be mindful of its reverse dependencies, and if they will need to be rebuilt after updating the library.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"/></svg></span>note</div><div class=admonitionContent_BuS1><p>If you haven't already, you will need to <a class="" href=/docs/packaging/advanced-config/local-repository>set up a local repository</a> to do stack rebuilds.</div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=updating-the-library>Updating the library<a href=#updating-the-library class=hash-link aria-label="Direct link to Updating the library" title="Direct link to Updating the library" translate=no>​</a></h2>
<p>Go through the steps in <a class="" href=/docs/packaging/updating-an-existing-package>Updating an Existing Package</a> as normal, but instead of running <code>go-task build</code>, run <code>go-task build-localcp</code>. This will automatically copy the produced package files to your local repository for use in future builds.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=what-are-symbols>What are symbols?<a href=#what-are-symbols class=hash-link aria-label="Direct link to What are symbols?" title="Direct link to What are symbols?" translate=no>​</a></h2>
<p>Updating a library often means also building its reverse dependencies against the new version due to dynamic linking. Libraries are distributed as shared object, or <code>.so</code>, files, which contain the code symbols that other software can use. These files are usually versioned, such as <code>libpoppler.so.140</code>. This version is called the "so version". When a piece of software is built, it is <em>linked</em> to the versioned libraries and code symbols that it uses.</p>
<p>When the developers of a library release a new update, they may decide to bump the <code>.so</code> version, and code symbols are added and/or removed from the library. If this happens, but its reverse dependencies are not rebuilt after updating, they will try to use the old shared object file and symbols. Because they no longer exist, however, the program will crash when it tries to open them. Rebuilding the stack ensures that every piece of software is pointing to the correct version of its dependencies.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=checking-if-rebuilds-are-necessary>Checking if rebuilds are necessary<a href=#checking-if-rebuilds-are-necessary class=hash-link aria-label="Direct link to Checking if rebuilds are necessary" title="Direct link to Checking if rebuilds are necessary" translate=no>​</a></h2>
<p>That's where the <code>abi_*</code> files in the package repository come in. <code>abi_libs</code> and <code>abi_symbols</code> list the libraries and code symbols provided by a package, while <code>abi_used_libs</code> and <code>abi_used_symbols</code> list what libraries and symbols the package links to. After updating a package that has <code>abi_libs</code> and <code>abi_symbols</code> files, run <code>git diff</code> on them and check for two things:</p>
<ol>
<li class="">Changes in the <code>.so</code> version</li>
<li class="">Removed lines in <code>abi_symbols</code></li>
</ol>
<p>If either of these conditions are true, then all reverse dependencies of that package need to be rebuilt.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"/></svg></span>note</div><div class=admonitionContent_BuS1><p>Sometimes, packages in a stack are rebuilt even though the above conditions are not met. These are called Safety Rebuilds.</div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=finding-reverse-dependencies>Finding reverse dependencies<a href=#finding-reverse-dependencies class=hash-link aria-label="Direct link to Finding reverse dependencies" title="Direct link to Finding reverse dependencies" translate=no>​</a></h2>
<p>In most cases, all of the required rebuilds can be found by running <code>eopkg info &lt;package></code> and looking at the Reverse Dependencies line, thanks to our tooling's automatic dependency detection. This doesn't always work, though, such as with <code>abseil-cpp</code>. In that case, you can use a tool like RipGrep to find all of the packages that link against the library you're updating, for example:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic># Run in the root of the Solus package repository on your system</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">rg </span><span class="token string" style=color:#e3116c>"absl"</span><span class="token plain"> packages/*/*/abi_used_libs</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=rebuild-the-stack>Rebuild the stack<a href=#rebuild-the-stack class=hash-link aria-label="Direct link to Rebuild the stack" title="Direct link to Rebuild the stack" translate=no>​</a></h2>
<p>For each package in the stack, follow this procedure:</p>
<ol>
<li class="">
<p>Bump the package</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">go-task bump</span><br/></span></code></pre></div></div>
</li>
<li class="">
<p>Make sure there are no unwanted changes</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token function" style=color:#d73a49>git</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>diff</span><span class="token plain"> </span><span class="token builtin class-name">.</span><br/></span></code></pre></div></div>
</li>
<li class="">
<p>Build the package using packages in your local repository</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">go-task build-local</span><br/></span></code></pre></div></div>
</li>
<li class="">
<p><a class="" href=/docs/packaging/updating-an-existing-package#commit-your-changes>Commit your changes</a>. Use this format for your commit message:</p>
<div class="language-git codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-git codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">package: Rebuild for other-package</span><br/></span></code></pre></div></div>
<p>Do this in the same git branch as the library update.</p>
</li>
</ol>
<p>Once all packages in the stack have been rebuilt, <a class="" href=/docs/packaging/submitting-a-pull-request>submit a pull request for review</a>. If changes are requested, see <a class="" href=/docs/packaging/submitting-a-pull-request#amending-a-pull-request-with-multiple-commits>this section</a> about amending a pull request with multiple commits.</div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href=https://github.com/getsolus/help-center-docs/tree/master/docs/packaging/stack-rebuilds.md target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_Z9Sw aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class=theme-last-updated>Last updated<!-- --> on <b><time datetime=2025-11-29T20:30:36.000Z itemprop=dateModified>Nov 29, 2025</time></b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/docs/packaging/procedures/request-a-package><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>Requesting a Package</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/docs/packaging/translation-instructions><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>Translation instructions</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#updating-the-library class="table-of-contents__link toc-highlight">Updating the library</a><li><a href=#what-are-symbols class="table-of-contents__link toc-highlight">What are symbols?</a><li><a href=#checking-if-rebuilds-are-necessary class="table-of-contents__link toc-highlight">Checking if rebuilds are necessary</a><li><a href=#finding-reverse-dependencies class="table-of-contents__link toc-highlight">Finding reverse dependencies</a><li><a href=#rebuild-the-stack class="table-of-contents__link toc-highlight">Rebuild the stack</a></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Docs</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/docs/user/intro>Users</a><li class=footer__item><a class=footer__link-item href=/docs/packaging>Packaging</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>News</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://getsol.us/blog target=_blank rel="noopener noreferrer" class=footer__link-item>Solus Blog</a><li class=footer__item><a class=footer__link-item href=/blog>Solus Devlog</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Community</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://discuss.getsol.us target=_blank rel="noopener noreferrer" class=footer__link-item>Forums<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://matrix.to/#/#solus:matrix.org target=_blank rel="noopener noreferrer" class=footer__link-item>Matrix<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://floss.social/@getsolus target=_blank rel=me class=footer__link-item>Mastodon<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>More</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://getsol.us/ target=_blank rel="noopener noreferrer" class=footer__link-item>Solus Homepage</a><li class=footer__item><a href=https://github.com/getsolus target=_blank rel=me class=footer__link-item>GitHub<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://dev.getsol.us target=_blank rel="noopener noreferrer" class=footer__link-item>Packages<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://issues.getsol.us target=_blank rel="noopener noreferrer" class=footer__link-item>Issue Tracker<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://github.com/getsolus/packages/blob/main/SECURITY.md target=_blank rel="noopener noreferrer" class=footer__link-item>Security<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div></div><div class="footer__bottom text--center"><div class=footer__copyright>Copyright © 2025 Solus Project. Built with Docusaurus.</div></div></div></footer></div></body>